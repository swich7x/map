
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>택배 위치 등록</title>
  <style>
    #map {
      width: 100%;
      height: 400px;
      margin-top: 10px;
    }
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, button {
      padding: 8px;
      margin: 5px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<h2>주소 + 송장번호 등록</h2>

<input type="text" id="address" placeholder="주소를 입력하세요" size="50">
<input type="text" id="trackingNumber" placeholder="송장번호 입력">
<button id="addBtn">추가</button>

<div id="map"></div>
<ul id="list"></ul>

<!-- 카카오 지도 API -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=95b203d7a3ee9d91db51514098523f67&libraries=services"></script>

<script>
  let map;
  const markers = [];

  function initMap() {
    const container = document.getElementById('map');
    const options = {
      center: new kakao.maps.LatLng(37.5665, 126.9780),
      level: 5
    };
    map = new kakao.maps.Map(container, options);
  }

  function addLocation() {
    const address = document.getElementById("address").value.trim();
    const trackingNumber = document.getElementById("trackingNumber").value.trim();

    if (!address || !trackingNumber) {
      alert("주소와 송장번호를 모두 입력해주세요.");
      return;
    }

    const geocoder = new kakao.maps.services.Geocoder();
    geocoder.addressSearch(address, function (result, status) {
      if (status === kakao.maps.services.Status.OK) {
        const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

        const marker = new kakao.maps.Marker({
          map: map,
          position: coords
        });
        markers.push(marker);

        const infowindow = new kakao.maps.InfoWindow({
          content: `<div style="padding:5px;font-size:13px;">송장번호: ${trackingNumber}</div>`
        });
        infowindow.open(map, marker);

        const listItem = document.createElement("li");
        listItem.textContent = `📍 ${address} - 송장번호: ${trackingNumber}`;
        document.getElementById("list").appendChild(listItem);

        map.setCenter(coords);
      } else {
        alert("주소를 찾을 수 없습니다. 다시 확인해주세요.");
      }
    });
  }

  window.onload = function () {
    initMap();
    document.getElementById("addBtn").addEventListener("click", addLocation);
  };
</script>

</body>
</html>
